<header class="main-header">
  <div class="header-container">
    <div class="logo-section">
      <img
        src="https://i.ibb.co/Wv9vgTy6/logo.png"
        alt="Garien Logo"
        class="logo-image"
      />
      <h1 class="boutique-name">Garien Fashion Boutique</h1>
    </div>

    <button
      mat-icon-button
      class="mobile-menu-icon"
      (click)="toggleMobileMenu()"
      aria-label="Toggle menu"
    >
      <mat-icon>{{ mobileMenuOpen ? "close" : "menu" }}</mat-icon>
    </button>

    <nav class="main-navigation" [class.mobile-open]="mobileMenuOpen">
      <ul class="nav-menu">
        <li *ngIf="authService.isSuperUser" class="nav-item">
          <a routerLink="/admin" class="nav-link" (click)="closeMobileMenu()">
            <i class="fas fa-cog"></i> Admin Panel
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/" class="nav-link" (click)="closeMobileMenu()"
            >Home</a
          >
        </li>

        <li
          class="nav-item dropdown"
          (mouseenter)="showProductsMenu = true"
          (mouseleave)="showProductsMenu = false"
        >
          <a routerLink="/products" class="nav-link" (click)="closeMobileMenu()"
            >Products</a
          >
          <ul class="dropdown-menu" [class.show]="showProductsMenu">
            <li>
              <a
                routerLink="/products/accessories"
                class="dropdown-link"
                (click)="closeMobileMenu()"
                >Accessories</a
              >
            </li>
            <li>
              <a
                routerLink="/products/clothing"
                class="dropdown-link"
                (click)="closeMobileMenu()"
                >Clothing</a
              >
            </li>
            <li>
              <a
                routerLink="/products/shoes"
                class="dropdown-link"
                (click)="closeMobileMenu()"
                >Shoes</a
              >
            </li>
            <li>
              <a
                routerLink="/products/bags"
                class="dropdown-link"
                (click)="closeMobileMenu()"
                >Bags</a
              >
            </li>
          </ul>
        </li>

        <li
          class="nav-item dropdown"
          (mouseenter)="showTailoredMenu = true"
          (mouseleave)="showTailoredMenu = false"
        >
          <a
            routerLink="/tailoring"
            class="nav-link"
            (click)="closeMobileMenu()"
            >Tailored</a
          >
          <ul class="dropdown-menu" [class.show]="showTailoredMenu">
            <li>
              <a
                routerLink="/tailoring/custom-suits"
                class="dropdown-link"
                (click)="closeMobileMenu()"
                >Custom Suits</a
              >
            </li>
            <li>
              <a
                routerLink="/tailoring/alterations"
                class="dropdown-link"
                (click)="closeMobileMenu()"
                >Alterations</a
              >
            </li>
            <li>
              <a
                routerLink="/tailoring/bespoke"
                class="dropdown-link"
                (click)="closeMobileMenu()"
                >Bespoke</a
              >
            </li>
            <li>
              <a
                routerLink="/tailoring/consultation"
                class="dropdown-link"
                (click)="closeMobileMenu()"
                >Consultation</a
              >
            </li>
          </ul>
        </li>

        <li class="nav-item">
          <a routerLink="/contact" class="nav-link" (click)="closeMobileMenu()"
            >Contact</a
          >
        </li>
        <li class="nav-item">
          <a routerLink="/blog" class="nav-link" (click)="closeMobileMenu()"
            >Blog</a
          >
        </li>
      </ul>
    </nav>

    <div class="header-actions">
      <button class="action-btn search-btn" (click)="toggleSearch()">
        <mat-icon>search</mat-icon>
      </button>
      <button
        class="action-btn login-btn"
        (click)="openLogin()"
        *ngIf="!authService.isLoggedIn"
      >
        <mat-icon>account_circle</mat-icon>
      </button>
      <button
        class="action-btn login-btn"
        (click)="authService.signOut()"
        *ngIf="authService.isLoggedIn"
      >
        Logout
      </button>
      <button mat-icon-button class="action-btn cart-btn" (click)="openCart()">
        <mat-icon>shopping_cart</mat-icon>
        <span class="cart-count">{{ cartItemCount }}</span>
      </button>
    </div>
  </div>

  <div class="search-container" [class.show]="showSearch">
    <app-search
      (search)="onSearchPerformed($event)"
      (searchClosed)="onSearchClosed()"
    ></app-search>
  </div>

  @if(showGenderNavigation){
  <div class="gender-navigation">
    <div class="gender-nav-container">
      <button
        class="gender-btn"
        [class.active]="selectedGender === 'women'"
        (click)="filterByGender('women')"
      >
        Women
      </button>
      <button
        class="gender-btn"
        [class.active]="selectedGender === 'men'"
        (click)="filterByGender('men')"
      >
        Men
      </button>
      <button
        class="gender-btn"
        [class.active]="selectedGender === 'kids'"
        (click)="filterByGender('kids')"
      >
        Kids
      </button>
      <button
        class="gender-btn"
        [class.active]="selectedGender === 'all'"
        (click)="filterByGender('all')"
      >
        All
      </button>
    </div>
  </div>
  }
</header>
